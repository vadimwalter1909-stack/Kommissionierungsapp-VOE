{% extends "base.html" %}

{% block content %}

{% set page_title = "Logistik ‚Äì √úbersicht" %}
{% set back_url = None %}

<div class="legend">

    <div class="legend-item">
        <span class="legend-box tile-rot"></span>
        Kritisch: Fehlende Artikel (Bestellung am Betoniertag / ‚ÄûNicht gefunden‚Äú)
    </div>

    <div class="legend-item">
        <span class="legend-box tile-grau"></span>
        Noch nichts zu tun
    </div>

    <div class="legend-item">
        <span class="legend-box tile-gelb"></span>
        Hinweis: Bestellung ‚Äì m√∂glicherweise nicht am Lager
    </div>

    <div class="legend-item">
        <span class="legend-box tile-hellblau"></span>
        Logistik fertig ‚Äì wartet auf Produktion
    </div>

    <div class="legend-item">
        <span class="legend-box tile-hellgruen"></span>
        Komplett kommissioniert ‚Äì bereit zur Auslieferung
    </div>

</div>

{% if tiles|length == 0 %}
    <p>Keine Logistikdaten gefunden.</p>
{% else %}

<div class="tile-container">

    {% for tile in tiles %}
    <a href="/logistik/{{ tile.kuerzel }}?start_bft={{ tile.start_bft }}"
       class="tile tile-{{ tile.status }}">

        <div class="tile-left">

            <h2 class="tile-title">{{ tile.kuerzel }}</h2>
            <div class="text-sm text-gray-500">
                Start: {{ tile.start_bft }}
            </div>

            <div class="tile-progress">
                <div class="progress-bar">
                    <div class="progress-fill"
                         style="width: {{ (tile.done / tile.total * 100) | round(0) }}%;">
                    </div>
                </div>
                <div class="progress-text">
                    {{ tile.done }} / {{ tile.total }}
                </div>
            </div>

            {% if tile.fehlteile and not tile.kritische_fehlteile %}
                <div class="tile-hint">
                    ‚ö†Ô∏è Achtung: Bestellung ‚Äì m√∂glicherweise nicht am Lager!
                </div>
            {% endif %}
        </div>

        <div class="tile-right">
            <span class="tile-icon">{{ tile.icon }}</span>

            {% if tile.produktion_fertig %}
                <span class="tile-icon-extra">üè≠</span>
            {% endif %}
        </div>

    </a>
    {% endfor %}

</div>

{% endif %}

{% endblock %}
